# å…ƒç´ å®šä½å‚è€ƒæ–‡æ¡£

## é‡è¦æç¤º

ç”±äºæ— æ³•ç›´æ¥è®¿é—®ç›®æ ‡ç½‘ç«™ `https://ldpg.rj.run/admin/signin`ï¼Œé¡¹ç›®ä¸­çš„å…ƒç´ å®šä½å™¨æ˜¯åŸºäºå¸¸è§ç™»å½•é¡µé¢çš„é€šç”¨å®šä½æ–¹å¼ã€‚

**åœ¨è¿è¡Œæµ‹è¯•å‰ï¼Œæ‚¨éœ€è¦æ ¹æ®å®é™…é¡µé¢ç»“æ„è°ƒæ•´ `pages/login_page.py` ä¸­çš„å®šä½å™¨ã€‚**

## å¦‚ä½•è·å–æ­£ç¡®çš„å®šä½å™¨

### æ–¹æ³•1: ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆæ¨èï¼‰

1. æ‰“å¼€ç™»å½•é¡µé¢: https://ldpg.rj.run/admin/signin
2. æŒ‰ `F12` æ‰“å¼€å¼€å‘è€…å·¥å…·
3. ç‚¹å‡»å·¦ä¸Šè§’çš„"é€‰æ‹©å…ƒç´ "å·¥å…·ï¼ˆæˆ–æŒ‰ `Ctrl+Shift+C`ï¼‰
4. ç‚¹å‡»é¡µé¢ä¸Šçš„ç”¨æˆ·åè¾“å…¥æ¡†
5. åœ¨å¼€å‘è€…å·¥å…·ä¸­ä¼šé«˜äº®æ˜¾ç¤ºè¯¥å…ƒç´ çš„HTMLä»£ç 
6. å³é”®ç‚¹å‡»è¯¥å…ƒç´  -> Copy -> Copy selector æˆ– Copy XPath

### æ–¹æ³•2: ä½¿ç”¨Selenium IDE

1. å®‰è£…Chrome/Firefoxçš„Selenium IDEæ‰©å±•
2. æ‰“å¼€ç™»å½•é¡µé¢å¹¶å¼€å§‹å½•åˆ¶
3. æ‰§è¡Œç™»å½•æ“ä½œ
4. åœæ­¢å½•åˆ¶ï¼ŒæŸ¥çœ‹ç”Ÿæˆçš„å®šä½å™¨

## å¸¸è§å®šä½å™¨ç¤ºä¾‹

### ç”¨æˆ·åè¾“å…¥æ¡†å¯èƒ½çš„å®šä½æ–¹å¼

```python
# 1. é€šè¿‡nameå±æ€§
username_input = (By.NAME, "username")

# 2. é€šè¿‡idå±æ€§
username_input = (By.ID, "username")

# 3. é€šè¿‡CSSé€‰æ‹©å™¨ - nameå±æ€§
username_input = (By.CSS_SELECTOR, "input[name='username']")

# 4. é€šè¿‡CSSé€‰æ‹©å™¨ - idå±æ€§
username_input = (By.CSS_SELECTOR, "#username")

# 5. é€šè¿‡CSSé€‰æ‹©å™¨ - classå±æ€§
username_input = (By.CSS_SELECTOR, ".username-input")

# 6. é€šè¿‡CSSé€‰æ‹©å™¨ - typeå’Œplaceholder
username_input = (By.CSS_SELECTOR, "input[type='text'][placeholder*='è´¦å·']")

# 7. é€šè¿‡XPath - nameå±æ€§
username_input = (By.XPATH, "//input[@name='username']")

# 8. é€šè¿‡XPath - placeholderåŒ…å«æ–‡æœ¬
username_input = (By.XPATH, "//input[contains(@placeholder, 'è´¦å·')]")

# 9. é€šè¿‡XPath - å¤šæ¡ä»¶
username_input = (By.XPATH, "//input[@type='text' or @name='username' or contains(@placeholder, 'è´¦å·')]")
```

### å¯†ç è¾“å…¥æ¡†å¯èƒ½çš„å®šä½æ–¹å¼

```python
# 1. é€šè¿‡typeå±æ€§ï¼ˆæœ€å¯é ï¼‰
password_input = (By.CSS_SELECTOR, "input[type='password']")

# 2. é€šè¿‡nameå±æ€§
password_input = (By.NAME, "password")

# 3. é€šè¿‡XPath
password_input = (By.XPATH, "//input[@type='password']")
```

### ç™»å½•æŒ‰é’®å¯èƒ½çš„å®šä½æ–¹å¼

```python
# 1. é€šè¿‡typeå±æ€§
login_button = (By.CSS_SELECTOR, "button[type='submit']")

# 2. é€šè¿‡æ–‡æœ¬å†…å®¹
login_button = (By.XPATH, "//button[contains(text(), 'ç™»å½•')]")

# 3. é€šè¿‡class
login_button = (By.CSS_SELECTOR, ".login-button")

# 4. å¦‚æœæ˜¯inputæ ‡ç­¾
login_button = (By.CSS_SELECTOR, "input[type='submit']")
```

### é”™è¯¯æç¤ºå¯èƒ½çš„å®šä½æ–¹å¼

```python
# 1. é€šè¿‡classï¼ˆå¸¸è§çš„é”™è¯¯æç¤ºclassï¼‰
error_message = (By.CSS_SELECTOR, ".error-message")
error_message = (By.CSS_SELECTOR, ".alert-danger")
error_message = (By.CSS_SELECTOR, ".message-error")
error_message = (By.CSS_SELECTOR, ".error-tip")

# 2. é€šè¿‡å¤šä¸ªå¯èƒ½çš„class
error_message = (By.CSS_SELECTOR, ".error-message, .alert-danger, .message-error")

# 3. é€šè¿‡XPath - åŒ…å«errorå…³é”®å­—çš„class
error_message = (By.XPATH, "//*[contains(@class, 'error')]")

# 4. é€šè¿‡XPath - åŒ…å«ç‰¹å®šæ–‡æœ¬
error_message = (By.XPATH, "//*[contains(text(), 'è¯·æ£€æŸ¥')]")
```

## å¦‚ä½•æµ‹è¯•å®šä½å™¨æ˜¯å¦æ­£ç¡®

### åœ¨æµè§ˆå™¨æ§åˆ¶å°æµ‹è¯•CSSé€‰æ‹©å™¨

```javascript
// åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„Consoleä¸­è¾“å…¥
document.querySelector("input[name='username']")

// å¦‚æœè¿”å›nullï¼Œè¯´æ˜å®šä½å™¨ä¸æ­£ç¡®
// å¦‚æœè¿”å›å…ƒç´ å¯¹è±¡ï¼Œè¯´æ˜å®šä½å™¨æ­£ç¡®
```

### åœ¨æµè§ˆå™¨æ§åˆ¶å°æµ‹è¯•XPath

```javascript
// åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„Consoleä¸­è¾“å…¥
$x("//input[@name='username']")

// è¿”å›æ•°ç»„ï¼Œå¦‚æœæ•°ç»„ä¸ºç©ºè¯´æ˜å®šä½å™¨ä¸æ­£ç¡®
```

### ä½¿ç”¨Pythonæµ‹è¯•å®šä½å™¨

åˆ›å»ºä¸€ä¸ªä¸´æ—¶æµ‹è¯•è„šæœ¬ `test_locators.py`:

```python
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC

# åˆ›å»ºdriver
driver = webdriver.Chrome()
driver.get("https://ldpg.rj.run/admin/signin")

# æµ‹è¯•å®šä½å™¨
try:
    # æµ‹è¯•ç”¨æˆ·åè¾“å…¥æ¡†
    username = WebDriverWait(driver, 10).until(
        EC.presence_of_element_located((By.CSS_SELECTOR, "input[name='username']"))
    )
    print("âœ“ ç”¨æˆ·åè¾“å…¥æ¡†å®šä½æˆåŠŸ")
    
    # æµ‹è¯•å¯†ç è¾“å…¥æ¡†
    password = driver.find_element(By.CSS_SELECTOR, "input[type='password']")
    print("âœ“ å¯†ç è¾“å…¥æ¡†å®šä½æˆåŠŸ")
    
    # æµ‹è¯•ç™»å½•æŒ‰é’®
    login_btn = driver.find_element(By.CSS_SELECTOR, "button[type='submit']")
    print("âœ“ ç™»å½•æŒ‰é’®å®šä½æˆåŠŸ")
    
except Exception as e:
    print(f"âœ— å®šä½å¤±è´¥: {e}")

finally:
    input("æŒ‰Enteré”®å…³é—­æµè§ˆå™¨...")
    driver.quit()
```

## ä¿®æ”¹é¡¹ç›®ä¸­çš„å®šä½å™¨

æ‰¾åˆ°æ­£ç¡®çš„å®šä½å™¨åï¼Œä¿®æ”¹ `pages/login_page.py` æ–‡ä»¶ï¼š

```python
class LoginPage(BasePage):
    """ç™»å½•é¡µé¢ç±»"""
    
    # å°†è¿™é‡Œçš„å®šä½å™¨æ›¿æ¢ä¸ºå®é™…çš„å®šä½å™¨
    username_input = (By.CSS_SELECTOR, "å®é™…çš„é€‰æ‹©å™¨")
    password_input = (By.CSS_SELECTOR, "å®é™…çš„é€‰æ‹©å™¨")
    login_button = (By.CSS_SELECTOR, "å®é™…çš„é€‰æ‹©å™¨")
    error_message = (By.CSS_SELECTOR, "å®é™…çš„é€‰æ‹©å™¨")
```

## å®šä½å™¨é€‰æ‹©å»ºè®®

### ä¼˜å…ˆçº§æ’åºï¼ˆä»é«˜åˆ°ä½ï¼‰

1. **ID** - å¦‚æœå…ƒç´ æœ‰å”¯ä¸€IDï¼Œä¼˜å…ˆä½¿ç”¨
   ```python
   (By.ID, "username")
   ```

2. **Name** - å¦‚æœå…ƒç´ æœ‰nameå±æ€§
   ```python
   (By.NAME, "username")
   ```

3. **CSS Selector** - é€šç”¨ä¸”æ€§èƒ½å¥½
   ```python
   (By.CSS_SELECTOR, "input[name='username']")
   ```

4. **XPath** - æœ€çµæ´»ä½†æ€§èƒ½ç›¸å¯¹è¾ƒä½
   ```python
   (By.XPATH, "//input[@name='username']")
   ```

### å®šä½å™¨ç¼–å†™åŸåˆ™

- âœ… å°½é‡ä½¿ç”¨ç¨³å®šçš„å±æ€§ï¼ˆid, nameï¼‰
- âœ… é¿å…ä½¿ç”¨å®¹æ˜“å˜åŒ–çš„å±æ€§ï¼ˆç´¢å¼•ã€ç»å¯¹è·¯å¾„ï¼‰
- âœ… ä½¿ç”¨ç›¸å¯¹è·¯å¾„è€Œéç»å¯¹è·¯å¾„
- âœ… æ·»åŠ é€‚å½“çš„ç­‰å¾…æ—¶é—´
- âŒ ä¸è¦ä½¿ç”¨åŒ…å«æ•°å­—ç´¢å¼•çš„XPath
- âŒ ä¸è¦ä½¿ç”¨è¿‡äºå¤æ‚çš„é€‰æ‹©å™¨

## è°ƒè¯•æŠ€å·§

å¦‚æœå®šä½å™¨ä¸å·¥ä½œï¼Œå¯ä»¥ï¼š

1. **å¢åŠ ç­‰å¾…æ—¶é—´**
   ```python
   element = WebDriverWait(driver, 20).until(
       EC.presence_of_element_located(locator)
   )
   ```

2. **æ‰“å°é¡µé¢æºç **
   ```python
   print(driver.page_source)
   ```

3. **æˆªå›¾æŸ¥çœ‹**
   ```python
   driver.save_screenshot("debug.png")
   ```

4. **ä½¿ç”¨æ›´å®½æ¾çš„å®šä½å™¨**
   ```python
   # ä»ä¸¥æ ¼åˆ°å®½æ¾
   (By.CSS_SELECTOR, "input#username.form-control[name='username']")  # å¤ªä¸¥æ ¼
   (By.CSS_SELECTOR, "input[name='username']")  # åˆšå¥½
   (By.CSS_SELECTOR, "input")  # å¤ªå®½æ¾
   ```

## å¸¸è§é—®é¢˜

### Q: å…ƒç´ å­˜åœ¨ä½†æ‰¾ä¸åˆ°ï¼Ÿ
A: å¯èƒ½æ˜¯å…ƒç´ åœ¨iframeä¸­ï¼Œæˆ–è€…éœ€è¦ç­‰å¾…å…ƒç´ å¯è§è€Œä¸æ˜¯ä»…å­˜åœ¨ã€‚

### Q: æœ‰å¤šä¸ªå…ƒç´ åŒ¹é…ï¼Ÿ
A: ä½¿ç”¨æ›´å…·ä½“çš„å®šä½å™¨ï¼Œæˆ–ä½¿ç”¨ `find_elements` åé€‰æ‹©ç‰¹å®šç´¢å¼•ã€‚

### Q: åŠ¨æ€IDå¦‚ä½•å¤„ç†ï¼Ÿ
A: ä¸ä½¿ç”¨IDï¼Œæ”¹ç”¨å…¶ä»–ç¨³å®šå±æ€§æˆ–éƒ¨åˆ†åŒ¹é…ï¼š
```python
(By.CSS_SELECTOR, "input[id^='username']")  # IDä»¥usernameå¼€å¤´
(By.XPATH, "//input[contains(@id, 'username')]")  # IDåŒ…å«username
```

---

**ç¥å®šä½é¡ºåˆ©ï¼** ğŸ¯
